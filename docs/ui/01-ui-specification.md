# UI 设计规范

> 无限向下 - UI 组件与视觉规范

## 1. 设计原则

### 1.1 核心原则

- **简洁明了**: 界面元素精简，信息层级清晰
- **触摸友好**: 按钮和交互区域足够大 (≥44px)
- **视觉反馈**: 所有交互都有即时反馈
- **一致性**: 相同功能使用相同样式

### 1.2 适配策略

```
设计分辨率: 750 × 1334 (iPhone 6/7/8)
适配模式: SHOW_ALL (保持宽高比，可能有黑边)
安全区域: 上下各留 88px (刘海屏/底部指示条)
```

---

## 2. 颜色规范

### 2.1 主色板

| 用途 | 颜色 | Hex | 说明 |
|------|------|-----|------|
| 主色 | 深蓝 | `#1a1a2e` | 背景、深色调 |
| 辅助色 | 靛蓝 | `#16213e` | 次级背景 |
| 强调色 | 蓝绿 | `#4ecdc4` | 按钮、高亮 |
| 警告色 | 橙色 | `#f5a623` | 警告、破碎平台 |
| 危险色 | 红色 | `#e74c3c` | 错误、死亡 |
| 成功色 | 绿色 | `#2ecc71` | 成功、移动平台 |

### 2.2 中性色

| 用途 | 颜色 | Hex |
|------|------|-----|
| 纯白 | 文字/图标 | `#ffffff` |
| 浅灰 | 次级文字 | `#b8b8b8` |
| 中灰 | 禁用状态 | `#666666` |
| 深灰 | 分割线 | `#333333` |

### 2.3 渐变色

```css
/* 主按钮渐变 */
background: linear-gradient(180deg, #4ecdc4 0%, #44a69c 100%);

/* 金色渐变 (金币/高分) */
background: linear-gradient(180deg, #ffd700 0%, #f5a623 100%);

/* 背景渐变 */
background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
```

---

## 3. 字体规范

### 3.1 字体选择

```
主字体: 系统默认字体
- iOS: PingFang SC
- Android: Noto Sans CJK SC / 思源黑体

数字字体: 系统等宽字体 (分数显示)
```

### 3.2 字号规范

| 用途 | 字号 | 字重 | 颜色 |
|------|------|------|------|
| 大标题 | 48px | Bold | `#ffffff` |
| 标题 | 36px | Bold | `#ffffff` |
| 正文 | 28px | Regular | `#ffffff` |
| 次级文字 | 24px | Regular | `#b8b8b8` |
| 小字 | 20px | Regular | `#666666` |
| 分数数字 | 64px | Bold | `#4ecdc4` |
| HUD 数字 | 32px | Bold | `#ffffff` |

### 3.3 行高

```
标题行高: 1.2
正文行高: 1.5
```

---

## 4. 组件规范

### 4.1 按钮 (Button)

**主按钮**:
```
尺寸: 300 × 80 px (最小触摸区域 44px)
圆角: 40px (全圆角)
背景: 渐变色 #4ecdc4 → #44a69c
文字: 32px, Bold, #ffffff
阴影: 0 4px 8px rgba(0,0,0,0.3)

状态:
- Normal: 默认样式
- Pressed: 缩放 0.95, 亮度 -10%
- Disabled: 背景 #666666, 文字 #999999
```

**次级按钮**:
```
尺寸: 200 × 60 px
圆角: 30px
背景: 透明
边框: 2px solid #4ecdc4
文字: 28px, Regular, #4ecdc4

状态:
- Normal: 默认样式
- Pressed: 背景 rgba(78,205,196,0.2)
- Disabled: 边框/文字 #666666
```

**图标按钮**:
```
尺寸: 80 × 80 px (触摸区域)
图标: 48 × 48 px
背景: 透明或圆形背景
```

### 4.2 弹窗 (Popup)

```
背景遮罩: rgba(0,0,0,0.7)
弹窗背景: #1a1a2e
圆角: 24px
边框: 2px solid #333333
内边距: 32px
最大宽度: 650px
最大高度: 80% 屏幕高度

动画:
- 显示: 缩放 0.8→1.0, 透明度 0→1, 时长 0.2s
- 隐藏: 缩放 1.0→0.8, 透明度 1→0, 时长 0.15s
```

### 4.3 列表项 (ListItem)

```
高度: 100px
背景: 透明 或 rgba(255,255,255,0.05)
边框: 无 或 1px solid #333333 (底部)
内边距: 0 24px

内容布局:
[排名] [头像] [昵称] ────────────── [分数]
 40px   60px   flex                  120px

选中状态: 背景 rgba(78,205,196,0.15)
```

### 4.4 输入框 (Input)

```
高度: 64px
背景: rgba(255,255,255,0.1)
圆角: 8px
边框: 1px solid #333333
内边距: 0 16px
文字: 28px, #ffffff
占位文字: 28px, #666666

聚焦状态: 边框 #4ecdc4
```

### 4.5 进度条 (ProgressBar)

```
高度: 16px
背景: rgba(255,255,255,0.1)
圆角: 8px
填充: 渐变色 #4ecdc4 → #44a69c
```

### 4.6 标签页 (TabBar)

```
高度: 80px
背景: 透明
标签宽度: 等分

标签样式:
- 未选中: 文字 #b8b8b8, 无下划线
- 选中: 文字 #4ecdc4, 下划线 3px #4ecdc4

动画: 下划线滑动, 时长 0.2s
```

---

## 5. 图标规范

### 5.1 图标尺寸

| 场景 | 尺寸 | 说明 |
|------|------|------|
| 导航图标 | 48 × 48 px | 底部/顶部栏 |
| 按钮图标 | 32 × 32 px | 按钮内图标 |
| 小图标 | 24 × 24 px | 文字旁图标 |
| 大图标 | 96 × 96 px | 弹窗/引导图标 |

### 5.2 图标风格

```
风格: 线性图标 (Outline)
线宽: 2-3px
颜色: 与文字颜色一致
```

### 5.3 常用图标

| 图标 | 用途 | 文件名 |
|------|------|--------|
| 🪙 | 金币 | icon_coin.png |
| 💎 | 钻石 | icon_diamond.png |
| ⚙️ | 设置 | icon_settings.png |
| ▶️ | 播放/开始 | icon_play.png |
| ⏸️ | 暂停 | icon_pause.png |
| 🏠 | 主页 | icon_home.png |
| 🔄 | 重试 | icon_retry.png |
| 📤 | 分享 | icon_share.png |
| 🏆 | 排行榜 | icon_leaderboard.png |
| ❌ | 关闭 | icon_close.png |
| 🔊 | 音量开 | icon_sound_on.png |
| 🔇 | 音量关 | icon_sound_off.png |

---

## 6. 动效规范

### 6.1 基础动效

| 动效类型 | 时长 | 缓动函数 |
|----------|------|----------|
| 快速反馈 | 0.1s | ease-out |
| 常规过渡 | 0.2s | ease-in-out |
| 弹性效果 | 0.3s | back-out |
| 长过渡 | 0.5s | ease-in-out |

### 6.2 常用动效

**按钮点击**:
```typescript
// 按下
tween(node).to(0.1, { scale: new Vec3(0.95, 0.95, 1) }).start();

// 松开
tween(node).to(0.1, { scale: new Vec3(1, 1, 1) }).start();
```

**弹窗显示**:
```typescript
node.setScale(0.8, 0.8);
node.getComponent(UIOpacity).opacity = 0;

tween(node)
    .parallel(
        tween().to(0.2, { scale: new Vec3(1, 1, 1) }, { easing: 'backOut' }),
        tween().call(() => {
            const opacity = node.getComponent(UIOpacity);
            tween(opacity).to(0.2, { opacity: 255 }).start();
        })
    )
    .start();
```

**分数滚动**:
```typescript
// 数字从 0 滚动到目标值
tween({ value: 0 })
    .to(0.5, { value: targetScore }, {
        onUpdate: (target) => {
            scoreLabel.string = Math.floor(target.value).toString();
        }
    })
    .start();
```

**抖动效果**:
```typescript
const originalX = node.position.x;
tween(node)
    .repeatForever(
        tween()
            .to(0.05, { position: new Vec3(originalX + 3, node.position.y) })
            .to(0.05, { position: new Vec3(originalX - 3, node.position.y) })
    )
    .start();
```

---

## 7. 布局规范

### 7.1 间距系统

```
基础单位: 8px

间距等级:
- xs: 8px    (紧凑间距)
- sm: 16px   (小间距)
- md: 24px   (中间距)
- lg: 32px   (大间距)
- xl: 48px   (超大间距)
```

### 7.2 安全区域

```
顶部安全区: 88px (刘海屏)
底部安全区: 68px (底部指示条)
左右边距: 32px (最小)
```

### 7.3 对齐规则

- 文字默认左对齐
- 数字默认右对齐
- 按钮组水平居中
- 列表项内容垂直居中

---

## 8. 具体界面规范

### 8.1 主界面 (HomeScene)

```
┌─────────────────────────────────────────┐
│ [💎 999]                    [⚙️]       │  ← 顶部栏 88px
├─────────────────────────────────────────┤
│                                         │
│            ╔════════════════╗           │
│            ║   无限向下     ║           │  ← 游戏标题
│            ╚════════════════╝           │
│                                         │
│               [ 角色展示 ]               │  ← 角色区域 400px
│                                         │
│            最高: 第 100 层              │  ← 最高纪录
│                                         │
│         ┌─────────────────────┐         │
│         │    ▶ 无尽模式       │         │  ← 主按钮 300×80
│         └─────────────────────┘         │
│                                         │
│         ┌─────────────────────┐         │
│         │    100 层挑战       │         │  ← 次级按钮
│         └─────────────────────┘         │
│                                         │
├─────────────────────────────────────────┤
│  [🏆排行榜]  [🛒商店]  [📤分享]        │  ← 底部栏 120px
└─────────────────────────────────────────┘
```

### 8.2 游戏界面 (GameScene)

```
┌─────────────────────────────────────────┐
│ 第 42 层                        [⏸]    │  ← HUD 64px
│ 🪙 125                                  │
├─────────────────────────────────────────┤
│                                         │
│                                         │
│        ═══════════════                  │  ← 游戏区域
│                                         │
│              🧍                         │
│                                         │
│    ════════════════════                 │
│                                         │
│          ═══════════                    │
│                                         │
└─────────────────────────────────────────┘
  触摸区域: 全屏
```

### 8.3 结算弹窗 (ResultPopup)

```
┌─────────────────────────────────────────┐
│                    [×]                  │
│                                         │
│              游戏结束                    │
│                                         │
│         ─────────────────────           │
│                                         │
│            下到第 42 层                 │
│                                         │
│              🏆                         │
│            得分: 4200                   │
│            金币: +42 🪙                │
│                                         │
│         击败了 78% 的玩家               │
│                                         │
│         ─────────────────────           │
│                                         │
│    ┌────────────────────────────┐       │
│    │   🎬 看广告双倍金币        │       │
│    └────────────────────────────┘       │
│                                         │
│    [📤分享]    [🔄再来]    [🏠返回]    │
│                                         │
└─────────────────────────────────────────┘
```

### 8.4 复活弹窗 (RevivePopup)

```
┌─────────────────────────────────────────┐
│                                         │
│              复活机会                    │
│                                         │
│                 ⏱                       │
│                 5                       │  ← 倒计时
│                                         │
│    ┌────────────────────────────┐       │
│    │   🎬 看广告立即复活        │       │
│    └────────────────────────────┘       │
│                                         │
│              [ 放弃 ]                   │
│                                         │
│        剩余 1 次复活机会                │
│                                         │
└─────────────────────────────────────────┘
```

---

## 9. 响应式适配

### 9.1 不同比例适配

| 比例 | 示例机型 | 适配策略 |
|------|----------|----------|
| 16:9 | 旧款 Android | 标准布局 |
| 19.5:9 | iPhone X+ | 安全区域留白 |
| 20:9 | 长屏 Android | 游戏区域拉伸 |
| 4:3 | iPad | 左右黑边 |

### 9.2 适配代码

```typescript
// 获取安全区域
const safeArea = wx.getSystemInfoSync().safeArea;

// 计算顶部偏移
const topOffset = safeArea.top;

// 计算底部偏移
const systemInfo = wx.getSystemInfoSync();
const bottomOffset = systemInfo.screenHeight - safeArea.bottom;

// 应用到 UI
topBar.setPosition(topBar.position.x, topBar.position.y - topOffset);
bottomBar.setPosition(bottomBar.position.x, bottomBar.position.y + bottomOffset);
```
